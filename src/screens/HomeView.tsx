import React, { FC, PropsWithChildren, useEffect, useRef } from 'react';
import { SafeAreaView, Text, Pressable, Animated, View } from 'react-native';
import type { ViewStyle } from 'react-native';
import { SvgXml } from 'react-native-svg';
import styles from '../assets/styles/styles';

type FadeInViewProps = PropsWithChildren<{ style: ViewStyle }>;

export default function HomeView({ navigation }) {
  const svgMarkup = `<svg width="234" height="99" viewBox="0 0 234 99" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M25.4391 46.5C23 52.5 23.9389 64.5 15.9389 62.5C5.93888 60 12.9479 50.5 18.4389 54.5C23.9299 58.5 34.9389 61 28.9389 68.5C22.9389 76 -1.56111 64.5 2.43889 83C4.27222 87.1667 10.0389 95.3 18.4389 94.5C26.8389 93.7 38.4391 62 40.9391 63.5" stroke="#83F8A4" stroke-width="3"/>
  <path d="M34.9391 37C34.9391 40.0589 34.1098 42.7603 32.8479 44.6532C31.5789 46.5566 29.9907 47.5 28.4391 47.5C26.8875 47.5 25.2992 46.5566 24.0303 44.6532C22.7684 42.7603 21.9391 40.0589 21.9391 37C21.9391 33.9411 22.7684 31.2397 24.0303 29.3468C25.2992 27.4434 26.8875 26.5 28.4391 26.5C29.9907 26.5 31.5789 27.4434 32.8479 29.3468C34.1098 31.2397 34.9391 33.9411 34.9391 37Z" fill="#56A531" stroke="#83F8A4" stroke-width="3"/>
  <path d="M79.9391 37C79.9391 40.0589 79.1098 42.7603 77.8479 44.6532C76.5789 46.5566 74.9907 47.5 73.4391 47.5C71.8875 47.5 70.2992 46.5566 69.0303 44.6532C67.7684 42.7603 66.9391 40.0589 66.9391 37C66.9391 33.9411 67.7684 31.2397 69.0303 29.3468C70.2992 27.4434 71.8875 26.5 73.4391 26.5C74.9907 26.5 76.5789 27.4434 77.8479 29.3468C79.1098 31.2397 79.9391 33.9411 79.9391 37Z" fill="#56A531" stroke="#83F8A4" stroke-width="3"/>
  <path d="M74.4391 26C74.4391 12.7452 63.6939 2 50.4391 2C37.1843 2 26.4391 12.7452 26.4391 26" stroke="#83F8A4" stroke-width="3"/>
  <path d="M50.144 94.64C48.6933 94.64 47.392 94.1493 46.24 93.168C45.1307 92.1867 44.4267 90.928 44.128 89.392L39.2 63.984C39.072 63.4293 39.1787 62.96 39.52 62.576C39.904 62.192 40.3947 62 40.992 62C41.76 62 42.2933 62.1067 42.592 62.32C42.8907 62.5333 43.104 62.96 43.232 63.6L48.032 88.688C48.3733 90.2667 49.0773 91.056 50.144 91.056C50.8693 91.056 51.3813 90.8853 51.68 90.544C52.0213 90.2027 52.256 89.584 52.384 88.688L56.032 66.352C56.2453 65.1147 56.8 64.0907 57.696 63.28C58.592 62.4267 59.6373 62 60.832 62C62.0267 62 63.072 62.4053 63.968 63.216C64.9067 64.0267 65.4613 65.072 65.632 66.352L69.28 88.688C69.408 89.5413 69.6427 90.16 69.984 90.544C70.3253 90.8853 70.8373 91.056 71.52 91.056C72.6293 91.056 73.3333 90.2667 73.632 88.688L78.368 63.6C78.496 62.96 78.7093 62.5333 79.008 62.32C79.3493 62.1067 79.904 62 80.672 62C81.312 62 81.8027 62.2133 82.144 62.64C82.4853 63.024 82.592 63.472 82.464 63.984L77.472 89.392C77.1733 90.9707 76.448 92.2507 75.296 93.232C74.1867 94.1707 72.928 94.64 71.52 94.64C68.2773 94.64 66.3573 92.8693 65.76 89.328L62.112 67.248C61.8987 66.096 61.472 65.52 60.832 65.52C60.192 65.52 59.7653 66.096 59.552 67.248L55.904 89.328C55.3067 92.8693 53.3867 94.64 50.144 94.64ZM99.8855 94.64C95.7042 94.64 92.4188 93.7227 90.0295 91.888C87.6828 90.0533 86.5095 87.4933 86.5095 84.208C86.5095 80.9653 87.7255 78.4053 90.1575 76.528C92.6322 74.6507 96.0242 73.712 100.333 73.712C102.936 73.712 105.262 74.0747 107.31 74.8C109.358 75.4827 110.894 76.4427 111.918 77.68V73.264C111.918 70.7467 111.086 68.8267 109.422 67.504C107.758 66.1813 105.304 65.52 102.062 65.52C98.0508 65.52 94.5308 66.5013 91.5015 68.464C90.9042 68.8053 90.3922 68.976 89.9655 68.976C89.6242 68.976 89.2615 68.848 88.8775 68.592C88.4508 68.2507 88.2375 67.8027 88.2375 67.248C88.2375 66.6933 88.4508 66.2453 88.8775 65.904C90.4562 64.7093 92.3975 63.7707 94.7015 63.088C97.0482 62.3627 99.4588 62 101.934 62C106.371 62 109.806 63.0027 112.238 65.008C114.67 67.0133 115.886 69.8507 115.886 73.52V92.336C115.886 93.872 115.246 94.64 113.966 94.64C113.368 94.64 112.878 94.4267 112.494 94C112.152 93.616 111.982 93.0827 111.982 92.4V89.776C110.659 91.3547 108.974 92.5707 106.926 93.424C104.878 94.2347 102.531 94.64 99.8855 94.64ZM100.206 91.12C103.704 91.12 106.542 90.4587 108.718 89.136C110.894 87.7707 111.982 86 111.982 83.824C111.982 81.7333 110.958 80.112 108.91 78.96C106.862 77.7653 104.003 77.168 100.333 77.168C97.1762 77.168 94.7442 77.7867 93.0375 79.024C91.3735 80.2187 90.5415 81.9467 90.5415 84.208C90.5415 86.4693 91.3522 88.1973 92.9735 89.392C94.6375 90.544 97.0482 91.12 100.206 91.12ZM128.566 94.64C127.926 94.64 127.435 94.4267 127.094 94C126.752 93.616 126.582 93.0613 126.582 92.336V47.728C126.582 46.192 127.243 45.424 128.566 45.424C129.888 45.424 130.55 46.192 130.55 47.728V92.336C130.55 93.0613 130.379 93.616 130.038 94C129.696 94.4267 129.206 94.64 128.566 94.64ZM143.6 94.64C142.96 94.64 142.469 94.4267 142.128 94C141.786 93.616 141.616 93.0613 141.616 92.336V47.728C141.616 46.192 142.277 45.424 143.6 45.424C144.922 45.424 145.584 46.192 145.584 47.728V76.784L166.768 62.256C167.109 62 167.472 61.872 167.856 61.872C168.453 61.872 168.922 62.1493 169.264 62.704C169.477 63.0453 169.583 63.3653 169.583 63.664C169.583 64.3467 169.264 64.88 168.624 65.264L157.232 73.072C160.901 75.504 163.781 78.2987 165.872 81.456C168.005 84.6133 169.477 88.2613 170.288 92.4C170.373 93.04 170.266 93.5733 169.968 94C169.669 94.4267 169.2 94.64 168.56 94.64C167.365 94.64 166.64 94.1067 166.384 93.04C165.445 88.7307 164.08 85.296 162.288 82.736C160.496 80.1333 157.701 77.6373 153.904 75.248L145.584 81.008V92.336C145.584 93.0613 145.413 93.616 145.072 94C144.73 94.4267 144.24 94.64 143.6 94.64ZM181.374 54.896C180.52 54.896 179.795 54.6187 179.198 54.064C178.6 53.4667 178.302 52.7627 178.302 51.952C178.302 51.1413 178.6 50.4373 179.198 49.84C179.838 49.2427 180.563 48.944 181.374 48.944C182.184 48.944 182.91 49.264 183.55 49.904C184.19 50.5013 184.51 51.184 184.51 51.952C184.51 52.72 184.19 53.4027 183.55 54C182.91 54.5973 182.184 54.896 181.374 54.896ZM181.374 94.64C180.734 94.64 180.243 94.4267 179.902 94C179.56 93.616 179.39 93.0613 179.39 92.336V64.304C179.39 62.768 180.051 62 181.374 62C182.014 62 182.504 62.2133 182.845 62.64C183.187 63.024 183.358 63.5787 183.358 64.304V92.336C183.358 93.0613 183.187 93.616 182.845 94C182.504 94.4267 182.014 94.64 181.374 94.64ZM209.599 94.64C204.095 94.64 199.85 93.2107 196.863 90.352C193.876 87.4507 192.383 83.3547 192.383 78.064C192.383 73.1147 193.898 69.2107 196.927 66.352C199.999 63.4507 204.18 62 209.471 62C212.756 62 215.658 62.5333 218.175 63.6C220.735 64.624 222.719 66.0747 224.127 67.952C225.535 69.8293 226.239 71.984 226.239 74.416C226.239 76.1227 225.77 77.4667 224.831 78.448C223.892 79.4293 222.591 79.92 220.927 79.92H196.543C196.543 83.4187 197.674 86.1493 199.935 88.112C202.239 90.0747 205.46 91.056 209.599 91.056C212.159 91.056 214.335 90.7787 216.127 90.224C217.919 89.6267 219.604 88.6667 221.183 87.344C221.823 86.7467 222.399 86.448 222.911 86.448C223.252 86.448 223.572 86.576 223.871 86.832C224.383 87.2587 224.639 87.728 224.639 88.24C224.639 88.6667 224.447 89.072 224.063 89.456C220.692 92.912 215.871 94.64 209.599 94.64ZM219.775 76.592C220.628 76.592 221.247 76.4213 221.631 76.08C222.015 75.696 222.207 75.0773 222.207 74.224C222.207 72.56 221.652 71.0667 220.543 69.744C219.476 68.4213 217.962 67.3973 215.999 66.672C214.079 65.904 211.903 65.52 209.471 65.52C205.418 65.52 202.26 66.5013 199.999 68.464C197.738 70.384 196.607 73.0933 196.607 76.592H219.775Z" fill="#83F8A4"/>
  </svg>`;

  const SvgImage = () => <SvgXml xml={svgMarkup} width="240px" />;

  const FadeInView: FC<FadeInViewProps> = (props) => {
    const fadeAnim = useRef(new Animated.Value(0)).current; // Initial value for opacity: 0

    useEffect(() => {
      Animated.timing(fadeAnim, {
        toValue: 1,
        duration: 5000,
        useNativeDriver: true,
      }).start();
    }, [fadeAnim]);

    return (
      <Animated.View // Special animatable View
        style={{
          ...props.style,
          opacity: fadeAnim, // Bind opacity to animated value
        }}
      >
        {props.children}
      </Animated.View>
    );
  };

  return (
    <SafeAreaView style={styles.containerColumn}>
      <FadeInView
        style={{
          width: 250,
          height: 50,
          margin: 60,
        }}
      >
        <SvgImage />
      </FadeInView>

      <View>
        <Pressable
          style={styles.button}
          onPress={() => navigation.navigate('StoriesView')}
        >
          <Text style={styles.textButton}>Let's start</Text>
        </Pressable>
      </View>
    </SafeAreaView>
  );
}
